{"version":3,"file":"VFileUploadItem.js","names":["VAvatar","VBtn","VDefaultsProvider","makeVListItemProps","VListItem","computed","ref","watchEffect","genericComponent","humanReadableFileSize","propsFactory","useRender","makeVFileUploadItemProps","clearable","Boolean","file","type","Object","default","fileIcon","String","showSize","border","rounded","lines","VFileUploadItem","name","props","emits","click:remove","click","e","setup","emit","slots","preview","base","undefined","onClickRemove","value","startsWith","URL","createObjectURL","listItemProps","filterProps","_createVNode","_mergeProps","class","title","size","style","prepend","slotProps","_createElementVNode","_Fragment","image","icon","append","clear","density","variant","onClick"],"sources":["../../../src/labs/VFileUpload/VFileUploadItem.tsx"],"sourcesContent":["// Components\nimport { VAvatar } from '@/components/VAvatar/VAvatar'\nimport { VBtn } from '@/components/VBtn/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider/VDefaultsProvider'\nimport { makeVListItemProps, VListItem } from '@/components/VList/VListItem'\n\n// Utilities\nimport { computed, ref, watchEffect } from 'vue'\nimport { genericComponent, humanReadableFileSize, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VListItemSlots } from '@/components/VList/VListItem'\n\nexport type VFileUploadItemSlots = {\n  clear: {\n    props: { onClick: () => void }\n  }\n} & VListItemSlots\n\nexport const makeVFileUploadItemProps = propsFactory({\n  clearable: Boolean,\n  file: {\n    type: Object as PropType<File>,\n    default: null,\n  },\n  fileIcon: {\n    type: String,\n    // TODO: setup up a proper aliased icon\n    default: 'mdi-file-document',\n  },\n  showSize: Boolean,\n\n  ...makeVListItemProps({\n    border: true,\n    rounded: true,\n    lines: 'two' as const,\n  }),\n}, 'VFileUploadItem')\n\nexport const VFileUploadItem = genericComponent<VFileUploadItemSlots>()({\n  name: 'VFileUploadItem',\n\n  props: makeVFileUploadItemProps(),\n\n  emits: {\n    'click:remove': () => true,\n    click: (e: MouseEvent | KeyboardEvent) => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const preview = ref()\n    const base = computed(() => typeof props.showSize !== 'boolean' ? props.showSize : undefined)\n\n    function onClickRemove () {\n      emit('click:remove')\n    }\n\n    watchEffect(() => {\n      preview.value = props.file?.type.startsWith('image') ? URL.createObjectURL(props.file) : undefined\n    })\n\n    useRender(() => {\n      const listItemProps = VListItem.filterProps(props)\n\n      return (\n        <VListItem\n          { ...listItemProps }\n          class={[\n            'v-file-upload-item',\n            props.class,\n          ]}\n          title={ props.title ?? props.file?.name }\n          subtitle={ props.showSize ? humanReadableFileSize(props.file?.size, base.value) : props.file?.type }\n          style={ props.style }\n        >\n          {{\n            ...slots,\n            title: slots.title ?? (() => props?.title ?? props.file?.name),\n            prepend: slotProps => (\n              <>\n                { !slots.prepend ? (\n                  <VAvatar\n                    icon={ props.fileIcon }\n                    image={ preview.value }\n                    rounded\n                  />\n                ) : (\n                  <VDefaultsProvider\n                    defaults={{\n                      VAvatar: {\n                        image: preview.value,\n                        icon: !preview.value ? props.fileIcon : undefined,\n                        rounded: true,\n                      },\n                    }}\n                  >\n                    { slots.prepend?.(slotProps) ?? (\n                      <VAvatar />\n                    )}\n                  </VDefaultsProvider>\n                )}\n              </>\n            ),\n            append: slotProps => (\n              <>\n                { props.clearable && (\n                  <>\n                    { !slots.clear ? (\n                      <VBtn\n                        icon=\"$clear\"\n                        density=\"comfortable\"\n                        variant=\"text\"\n                        onClick={ onClickRemove }\n                      />\n                    ) : (\n                      <VDefaultsProvider\n                        defaults={{\n                          VBtn: {\n                            icon: '$clear',\n                            density: 'comfortable',\n                            variant: 'text',\n                          },\n                        }}\n                      >\n                        { slots.clear?.({\n                          ...slotProps,\n                          props: { onClick: onClickRemove },\n                        }) ?? (<VBtn />)}\n                      </VDefaultsProvider>\n                    )}\n                  </>\n                )}\n\n                { slots.append?.(slotProps) }\n              </>\n            ),\n          }}\n        </VListItem>\n      )\n    })\n  },\n})\n\nexport type VFileUploadItem = InstanceType<typeof VFileUploadItem>\n"],"mappings":"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","ignoreList":[]}