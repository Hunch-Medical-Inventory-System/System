{"version":3,"file":"VPieTooltip.js","names":["VListItem","makeVTooltipProps","VTooltip","makeTransitionProps","MaybeTransition","toRef","formatTextTemplate","genericComponent","pick","propsFactory","makeVPieTooltipProps","modelValue","Boolean","target","Object","item","type","default","titleFormat","String","Function","subtitleFormat","VPieTooltip","name","props","setup","slots","tooltipTitleFormatFunction","segment","tooltipSubtitleFormatFunction","_createVNode","offset","transition","key","value","prepend","undefined"],"sources":["../../../src/labs/VPie/VPieTooltip.tsx"],"sourcesContent":["// Components\nimport { VListItem } from '@/components/VList/VListItem'\nimport { makeVTooltipProps, VTooltip } from '@/components/VTooltip/VTooltip'\n\n// Composables\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\n\n// Utilities\nimport { toRef } from 'vue'\nimport { formatTextTemplate } from './utils'\nimport { genericComponent, pick, propsFactory } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { PieItem, TextTemplate } from './types'\n\nexport type VPieTooltipSlots = {\n  default: { item: PieItem }\n  prepend: { item: PieItem }\n}\n\nexport const makeVPieTooltipProps = propsFactory({\n  modelValue: Boolean,\n  target: Object as PropType<[x: number, y: number]>,\n  item: {\n    type: Object as PropType<PieItem | null>,\n    default: null,\n  },\n  titleFormat: {\n    type: [String, Function] as PropType<TextTemplate>,\n    default: '[title]',\n  },\n  subtitleFormat: {\n    type: [String, Function] as PropType<TextTemplate>,\n    default: '[value]',\n  },\n  ...makeTransitionProps(),\n  ...pick(makeVTooltipProps(), ['offset']),\n}, 'VPieTooltip')\n\nexport const VPieTooltip = genericComponent<VPieTooltipSlots>()({\n  name: 'VPieTooltip',\n\n  props: makeVPieTooltipProps(),\n\n  setup (props, { slots }) {\n    const tooltipTitleFormatFunction = toRef(() => (segment: PieItem) => {\n      return typeof props.titleFormat === 'function'\n        ? props.titleFormat(segment)\n        : formatTextTemplate(props.titleFormat, segment)\n    })\n\n    const tooltipSubtitleFormatFunction = toRef(() => (segment: PieItem) => {\n      return typeof props.subtitleFormat === 'function'\n        ? props.subtitleFormat(segment)\n        : formatTextTemplate(props.subtitleFormat, segment)\n    })\n\n    return () => (\n      <VTooltip\n        offset={ props.offset }\n        modelValue={ props.modelValue }\n        target={ props.target }\n        contentClass=\"v-pie__tooltip-content\"\n      >\n        { !!props.item && (\n          slots.default?.({ item: props.item }) ?? (\n            <MaybeTransition transition={ props.transition } mode=\"out-in\">\n              <VListItem\n                key={ props.item.key }\n                density=\"compact\"\n                title={ tooltipTitleFormatFunction.value(props.item) }\n                subtitle={ tooltipSubtitleFormatFunction.value(props.item) }\n                v-slots={{\n                  prepend: slots.prepend\n                    ? () => slots.prepend!({ item: props.item! })\n                    : undefined,\n                }}\n              />\n            </MaybeTransition>\n          )\n        )}\n      </VTooltip>\n    )\n  },\n})\n\nexport type VPieTooltip = InstanceType<typeof VPieTooltip>\n"],"mappings":";AAAA;AAAA,SACSA,SAAS;AAAA,SACTC,iBAAiB,EAAEC,QAAQ,iDAEpC;AAAA,SACSC,mBAAmB,EAAEC,eAAe,2CAE7C;AACA,SAASC,KAAK,QAAQ,KAAK;AAAA,SAClBC,kBAAkB;AAAA,SAClBC,gBAAgB,EAAEC,IAAI,EAAEC,YAAY,+BAE7C;AASA,OAAO,MAAMC,oBAAoB,GAAGD,YAAY,CAAC;EAC/CE,UAAU,EAAEC,OAAO;EACnBC,MAAM,EAAEC,MAA0C;EAClDC,IAAI,EAAE;IACJC,IAAI,EAAEF,MAAkC;IACxCG,OAAO,EAAE;EACX,CAAC;EACDC,WAAW,EAAE;IACXF,IAAI,EAAE,CAACG,MAAM,EAAEC,QAAQ,CAA2B;IAClDH,OAAO,EAAE;EACX,CAAC;EACDI,cAAc,EAAE;IACdL,IAAI,EAAE,CAACG,MAAM,EAAEC,QAAQ,CAA2B;IAClDH,OAAO,EAAE;EACX,CAAC;EACD,GAAGd,mBAAmB,CAAC,CAAC;EACxB,GAAGK,IAAI,CAACP,iBAAiB,CAAC,CAAC,EAAE,CAAC,QAAQ,CAAC;AACzC,CAAC,EAAE,aAAa,CAAC;AAEjB,OAAO,MAAMqB,WAAW,GAAGf,gBAAgB,CAAmB,CAAC,CAAC;EAC9DgB,IAAI,EAAE,aAAa;EAEnBC,KAAK,EAAEd,oBAAoB,CAAC,CAAC;EAE7Be,KAAKA,CAAED,KAAK,EAAE;IAAEE;EAAM,CAAC,EAAE;IACvB,MAAMC,0BAA0B,GAAGtB,KAAK,CAAC,MAAOuB,OAAgB,IAAK;MACnE,OAAO,OAAOJ,KAAK,CAACN,WAAW,KAAK,UAAU,GAC1CM,KAAK,CAACN,WAAW,CAACU,OAAO,CAAC,GAC1BtB,kBAAkB,CAACkB,KAAK,CAACN,WAAW,EAAEU,OAAO,CAAC;IACpD,CAAC,CAAC;IAEF,MAAMC,6BAA6B,GAAGxB,KAAK,CAAC,MAAOuB,OAAgB,IAAK;MACtE,OAAO,OAAOJ,KAAK,CAACH,cAAc,KAAK,UAAU,GAC7CG,KAAK,CAACH,cAAc,CAACO,OAAO,CAAC,GAC7BtB,kBAAkB,CAACkB,KAAK,CAACH,cAAc,EAAEO,OAAO,CAAC;IACvD,CAAC,CAAC;IAEF,OAAO,MAAAE,YAAA,CAAA5B,QAAA;MAAA,UAEMsB,KAAK,CAACO,MAAM;MAAA,cACRP,KAAK,CAACb,UAAU;MAAA,UACpBa,KAAK,CAACX,MAAM;MAAA;IAAA;MAAAI,OAAA,EAAAA,CAAA,MAGnB,CAAC,CAACO,KAAK,CAACT,IAAI,KACZW,KAAK,CAACT,OAAO,GAAG;QAAEF,IAAI,EAAES,KAAK,CAACT;MAAK,CAAC,CAAC,IAAAe,YAAA,CAAA1B,eAAA;QAAA,cACLoB,KAAK,CAACQ,UAAU;QAAA;MAAA;QAAAf,OAAA,EAAAA,CAAA,MAAAa,YAAA,CAAA9B,SAAA;UAAA,OAEpCwB,KAAK,CAACT,IAAI,CAACkB,GAAG;UAAA;UAAA,SAEZN,0BAA0B,CAACO,KAAK,CAACV,KAAK,CAACT,IAAI,CAAC;UAAA,YACzCc,6BAA6B,CAACK,KAAK,CAACV,KAAK,CAACT,IAAI;QAAC,GACjD;UACPoB,OAAO,EAAET,KAAK,CAACS,OAAO,GAClB,MAAMT,KAAK,CAACS,OAAO,CAAE;YAAEpB,IAAI,EAAES,KAAK,CAACT;UAAM,CAAC,CAAC,GAC3CqB;QACN,CAAC;MAAA,EAGN,CACF;IAAA,EAEJ;EACH;AACF,CAAC,CAAC","ignoreList":[]}