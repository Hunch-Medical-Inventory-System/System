{"version":3,"file":"VStepperVerticalItem.js","names":["VStepperVerticalActions","VAvatar","VDefaultsProvider","makeVExpansionPanelProps","VExpansionPanel","VIcon","makeStepperItemProps","computed","ref","genericComponent","omit","propsFactory","useRender","makeVStepperVerticalItemProps","hideActions","Boolean","expandIcon","collapseIcon","VStepperVerticalItem","name","props","emits","click:next","click:prev","click:finish","setup","emit","slots","vExpansionPanelRef","step","isNaN","parseInt","value","Number","groupItem","isValid","rules","every","handler","canEdit","disabled","editable","hasError","error","hasCompleted","complete","length","isFirst","icon","errorIcon","completeIcon","isSelected","editIcon","slotProps","title","subtitle","actionProps","prev","onClickPrev","next","onClickNext","isLast","group","hasColor","hasActions","actions","expansionPanelProps","filterProps","_createVNode","_mergeProps","class","style","_createElementVNode","_Fragment","color","undefined","default","text","finish"],"sources":["../../../src/labs/VStepperVertical/VStepperVerticalItem.tsx"],"sourcesContent":["// Styles\nimport './VStepperVerticalItem.sass'\n\n// Components\nimport { VStepperVerticalActions } from './VStepperVerticalActions'\nimport { VAvatar } from '@/components/VAvatar/VAvatar'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider/VDefaultsProvider'\nimport { makeVExpansionPanelProps, VExpansionPanel } from '@/components/VExpansionPanel/VExpansionPanel'\nimport { VIcon } from '@/components/VIcon/VIcon'\nimport { makeStepperItemProps } from '@/components/VStepper/VStepperItem'\n\n// Utilities\nimport { computed, ref } from 'vue'\nimport { genericComponent, omit, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { StepperItemSlot } from '@/components/VStepper/VStepperItem'\n\nexport type StepperVerticalItemActionSlot<T = any> = StepperItemSlot<T> & {\n  next: () => void\n  prev: () => void\n}\n\nexport type VStepperVerticalItemSlots<T = any> = {\n  default: StepperItemSlot<T>\n  icon: StepperItemSlot<T>\n  subtitle: StepperItemSlot<T>\n  title: StepperItemSlot<T>\n  text: StepperItemSlot<T>\n  prev: StepperVerticalItemActionSlot<T>\n  next: StepperVerticalItemActionSlot<T>\n  actions: StepperVerticalItemActionSlot<T>\n}\n\nexport const makeVStepperVerticalItemProps = propsFactory({\n  hideActions: Boolean,\n\n  ...makeStepperItemProps(),\n  ...omit(makeVExpansionPanelProps({\n    expandIcon: '',\n    collapseIcon: '',\n  }), ['hideActions']),\n}, 'VStepperVerticalItem')\n\nexport const VStepperVerticalItem = genericComponent<VStepperVerticalItemSlots>()({\n  name: 'VStepperVerticalItem',\n\n  props: makeVStepperVerticalItemProps(),\n\n  emits: {\n    'click:next': () => true,\n    'click:prev': () => true,\n    'click:finish': () => true,\n  },\n\n  setup (props, { emit, slots }) {\n    const vExpansionPanelRef = ref<typeof VExpansionPanel>()\n    const step = computed(() => !isNaN(parseInt(props.value)) ? Number(props.value) : props.value)\n    const groupItem = computed(() => vExpansionPanelRef.value?.groupItem)\n    const isValid = computed(() => props.rules.every(handler => handler() === true))\n    const canEdit = computed(() => !props.disabled && props.editable)\n    const hasError = computed(() => props.error || !isValid.value)\n    const hasCompleted = computed(() => props.complete || (props.rules.length > 0 && isValid.value))\n\n    const disabled = computed(() => {\n      if (props.disabled) return props.disabled\n      if (groupItem.value?.isFirst.value) return 'prev'\n\n      return false\n    })\n    const icon = computed(() => {\n      if (hasError.value) return props.errorIcon\n      if (hasCompleted.value) return props.completeIcon\n      if (groupItem.value?.isSelected.value && props.editable) return props.editIcon\n\n      return props.icon\n    })\n\n    const slotProps = computed(() => ({\n      canEdit: canEdit.value,\n      hasError: hasError.value,\n      hasCompleted: hasCompleted.value,\n      title: props.title,\n      subtitle: props.subtitle,\n      step: step.value,\n    } satisfies StepperItemSlot))\n\n    const actionProps = computed(() => ({\n      ...slotProps.value,\n      prev: onClickPrev,\n      next: onClickNext,\n    } satisfies StepperVerticalItemActionSlot))\n\n    function onClickNext () {\n      emit('click:next')\n\n      if (groupItem.value?.isLast.value) return\n\n      groupItem.value.group.next()\n    }\n\n    function onClickPrev () {\n      emit('click:prev')\n\n      groupItem.value.group.prev()\n    }\n\n    useRender(() => {\n      const hasColor = (\n        !groupItem.value ||\n        groupItem.value?.isSelected.value ||\n        hasCompleted.value ||\n        canEdit.value\n      ) && (\n        !hasError.value &&\n        !props.disabled\n      )\n\n      const hasActions = !props.hideActions || !!slots.actions\n      const expansionPanelProps = VExpansionPanel.filterProps(props)\n\n      return (\n        <VExpansionPanel\n          _as=\"VStepperVerticalItem\"\n          ref={ vExpansionPanelRef }\n          { ...expansionPanelProps }\n          class={[\n            'v-stepper-vertical-item',\n            {\n              'v-stepper-vertical-item--complete': hasCompleted.value,\n              'v-stepper-vertical-item--disabled': props.disabled,\n              'v-stepper-vertical-item--editable': canEdit.value,\n              'v-stepper-vertical-item--error': hasError.value,\n            },\n            props.class,\n          ]}\n          readonly={ !props.editable }\n          style={ props.style }\n          color=\"\"\n          hideActions={ false }\n          value={ step.value }\n        >\n          {{\n            title: () => (\n              <>\n                <VAvatar\n                  key=\"stepper-avatar\"\n                  class=\"v-stepper-vertical-item__avatar\"\n                  color={ hasColor ? props.color : undefined }\n                  size={ 24 }\n                  start\n                >\n                  { slots.icon?.(slotProps.value) ?? (\n                    icon.value ? (\n                      <VIcon icon={ icon.value }></VIcon>\n                    ) : step.value\n                  )}\n                </VAvatar>\n\n                <div>\n                  <div class=\"v-stepper-vertical-item__title\">\n                    { slots.title?.(slotProps.value) ?? props.title }\n                  </div>\n\n                  <div class=\"v-stepper-vertical-item__subtitle\">\n                    { slots.subtitle?.(slotProps.value) ?? props.subtitle }\n                  </div>\n                </div>\n              </>\n            ),\n            text: () => (\n              <>\n                { slots.default?.(slotProps.value) ?? props.text }\n\n                { hasActions && (\n                  <VDefaultsProvider\n                    defaults={{\n                      VStepperVerticalActions: {\n                        disabled: disabled.value,\n                        finish: groupItem.value?.isLast.value,\n                      },\n                    }}\n                  >\n                    { slots.actions?.(actionProps.value) ?? (\n                      <VStepperVerticalActions\n                        onClick:next={ onClickNext }\n                        onClick:prev={ onClickPrev }\n                        v-slots={{\n                          prev: slots.prev ? () => slots.prev?.(actionProps.value) : undefined,\n                          next: slots.next ? () => slots.next?.(actionProps.value) : undefined,\n                        }}\n                      />\n                    )}\n                  </VDefaultsProvider>\n                )}\n              </>\n            ),\n          }}\n        </VExpansionPanel>\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VStepperVerticalItem = InstanceType<typeof VStepperVerticalItem>\n"],"mappings":"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","ignoreList":[]}