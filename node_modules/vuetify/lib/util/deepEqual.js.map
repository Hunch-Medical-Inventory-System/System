{"version":3,"file":"deepEqual.js","names":["isPrimitive","updateRecursionCache","a","b","cache","result","visitedObject","get","set","newCacheItem","WeakMap","findCachedComparison","r1","r2","deepEqual","recursionCache","Date","getTime","Object","props","keys","length","cachedComparisonResult","every","p"],"sources":["../../src/util/deepEqual.ts"],"sourcesContent":["import { isPrimitive } from './helpers'\n\nfunction updateRecursionCache (a: any, b: any, cache: WeakMap<any, any>, result: boolean) {\n  if (!cache || isPrimitive(a) || isPrimitive(b)) return\n\n  const visitedObject = cache.get(a)\n  if (visitedObject) {\n    visitedObject.set(b, result)\n  } else {\n    const newCacheItem = new WeakMap()\n    newCacheItem.set(b, result)\n    cache.set(a, newCacheItem)\n  }\n}\n\nfunction findCachedComparison (a: any, b: any, cache: WeakMap<any, any>): boolean | null {\n  if (!cache || isPrimitive(a) || isPrimitive(b)) return null\n\n  const r1 = cache.get(a)?.get(b)\n  if (typeof r1 === 'boolean') return r1\n  const r2 = cache.get(b)?.get(a)\n  if (typeof r2 === 'boolean') return r2\n  return null\n}\n\nexport type ValueComparator = (a: any, b: any) => boolean\n\nexport function deepEqual (a: any, b: any, recursionCache = new WeakMap()): boolean {\n  if (a === b) return true\n\n  if (\n    a instanceof Date &&\n    b instanceof Date &&\n    a.getTime() !== b.getTime()\n  ) {\n    // If the values are Date, compare them as timestamps\n    return false\n  }\n\n  if (a !== Object(a) || b !== Object(b)) {\n    // If the values aren't objects, they were already checked for equality\n    return false\n  }\n\n  const props = Object.keys(a)\n\n  if (props.length !== Object.keys(b).length) {\n    // Different number of props, don't bother to check\n    return false\n  }\n\n  const cachedComparisonResult = findCachedComparison(a, b, recursionCache)\n  if (cachedComparisonResult) {\n    return cachedComparisonResult\n  }\n\n  updateRecursionCache(a, b, recursionCache, true)\n\n  return props.every(p => deepEqual(a[p], b[p], recursionCache))\n}\n"],"mappings":"SAASA,WAAW;AAEpB,SAASC,oBAAoBA,CAAEC,CAAM,EAAEC,CAAM,EAAEC,KAAwB,EAAEC,MAAe,EAAE;EACxF,IAAI,CAACD,KAAK,IAAIJ,WAAW,CAACE,CAAC,CAAC,IAAIF,WAAW,CAACG,CAAC,CAAC,EAAE;EAEhD,MAAMG,aAAa,GAAGF,KAAK,CAACG,GAAG,CAACL,CAAC,CAAC;EAClC,IAAII,aAAa,EAAE;IACjBA,aAAa,CAACE,GAAG,CAACL,CAAC,EAAEE,MAAM,CAAC;EAC9B,CAAC,MAAM;IACL,MAAMI,YAAY,GAAG,IAAIC,OAAO,CAAC,CAAC;IAClCD,YAAY,CAACD,GAAG,CAACL,CAAC,EAAEE,MAAM,CAAC;IAC3BD,KAAK,CAACI,GAAG,CAACN,CAAC,EAAEO,YAAY,CAAC;EAC5B;AACF;AAEA,SAASE,oBAAoBA,CAAET,CAAM,EAAEC,CAAM,EAAEC,KAAwB,EAAkB;EACvF,IAAI,CAACA,KAAK,IAAIJ,WAAW,CAACE,CAAC,CAAC,IAAIF,WAAW,CAACG,CAAC,CAAC,EAAE,OAAO,IAAI;EAE3D,MAAMS,EAAE,GAAGR,KAAK,CAACG,GAAG,CAACL,CAAC,CAAC,EAAEK,GAAG,CAACJ,CAAC,CAAC;EAC/B,IAAI,OAAOS,EAAE,KAAK,SAAS,EAAE,OAAOA,EAAE;EACtC,MAAMC,EAAE,GAAGT,KAAK,CAACG,GAAG,CAACJ,CAAC,CAAC,EAAEI,GAAG,CAACL,CAAC,CAAC;EAC/B,IAAI,OAAOW,EAAE,KAAK,SAAS,EAAE,OAAOA,EAAE;EACtC,OAAO,IAAI;AACb;AAIA,OAAO,SAASC,SAASA,CAAEZ,CAAM,EAAEC,CAAM,EAAEY,cAAc,GAAG,IAAIL,OAAO,CAAC,CAAC,EAAW;EAClF,IAAIR,CAAC,KAAKC,CAAC,EAAE,OAAO,IAAI;EAExB,IACED,CAAC,YAAYc,IAAI,IACjBb,CAAC,YAAYa,IAAI,IACjBd,CAAC,CAACe,OAAO,CAAC,CAAC,KAAKd,CAAC,CAACc,OAAO,CAAC,CAAC,EAC3B;IACA;IACA,OAAO,KAAK;EACd;EAEA,IAAIf,CAAC,KAAKgB,MAAM,CAAChB,CAAC,CAAC,IAAIC,CAAC,KAAKe,MAAM,CAACf,CAAC,CAAC,EAAE;IACtC;IACA,OAAO,KAAK;EACd;EAEA,MAAMgB,KAAK,GAAGD,MAAM,CAACE,IAAI,CAAClB,CAAC,CAAC;EAE5B,IAAIiB,KAAK,CAACE,MAAM,KAAKH,MAAM,CAACE,IAAI,CAACjB,CAAC,CAAC,CAACkB,MAAM,EAAE;IAC1C;IACA,OAAO,KAAK;EACd;EAEA,MAAMC,sBAAsB,GAAGX,oBAAoB,CAACT,CAAC,EAAEC,CAAC,EAAEY,cAAc,CAAC;EACzE,IAAIO,sBAAsB,EAAE;IAC1B,OAAOA,sBAAsB;EAC/B;EAEArB,oBAAoB,CAACC,CAAC,EAAEC,CAAC,EAAEY,cAAc,EAAE,IAAI,CAAC;EAEhD,OAAOI,KAAK,CAACI,KAAK,CAACC,CAAC,IAAIV,SAAS,CAACZ,CAAC,CAACsB,CAAC,CAAC,EAAErB,CAAC,CAACqB,CAAC,CAAC,EAAET,cAAc,CAAC,CAAC;AAChE","ignoreList":[]}