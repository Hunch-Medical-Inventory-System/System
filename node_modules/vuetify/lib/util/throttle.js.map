{"version":3,"file":"throttle.js","names":["throttle","fn","delay","options","leading","trailing","timeoutId","lastExec","throttling","start","clear","clearTimeout","wrap","args","now","Date","elapsed","Math","max","invoke","setTimeout","immediate"],"sources":["../../src/util/throttle.ts"],"sourcesContent":["export function throttle<T extends (...args: any[]) => any> (\n  fn: T,\n  delay: number,\n  options = { leading: true, trailing: true },\n) {\n  let timeoutId = 0 as any\n  let lastExec = 0\n  let throttling = false\n  let start = 0\n\n  function clear () {\n    clearTimeout(timeoutId)\n    throttling = false\n    start = 0\n  }\n\n  const wrap = (...args: Parameters<T>): void | ReturnType<T> => {\n    clearTimeout(timeoutId)\n\n    const now = Date.now()\n\n    if (!start) start = now\n    const elapsed = now - Math.max(start, lastExec)\n\n    function invoke () {\n      lastExec = Date.now()\n      timeoutId = setTimeout(clear, delay)\n      fn(...args)\n    }\n\n    if (!throttling) {\n      throttling = true\n      if (options.leading) {\n        invoke()\n      }\n    } else if (elapsed >= delay) {\n      invoke()\n    } else if (options.trailing) {\n      timeoutId = setTimeout(invoke, delay - elapsed)\n    }\n  }\n\n  wrap.clear = clear\n  wrap.immediate = fn\n  return wrap\n}\n"],"mappings":"AAAA,OAAO,SAASA,QAAQA,CACtBC,EAAK,EACLC,KAAa,EACbC,OAAO,GAAG;EAAEC,OAAO,EAAE,IAAI;EAAEC,QAAQ,EAAE;AAAK,CAAC,EAC3C;EACA,IAAIC,SAAS,GAAG,CAAQ;EACxB,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,UAAU,GAAG,KAAK;EACtB,IAAIC,KAAK,GAAG,CAAC;EAEb,SAASC,KAAKA,CAAA,EAAI;IAChBC,YAAY,CAACL,SAAS,CAAC;IACvBE,UAAU,GAAG,KAAK;IAClBC,KAAK,GAAG,CAAC;EACX;EAEA,MAAMG,IAAI,GAAGA,CAAC,GAAGC,IAAmB,KAA2B;IAC7DF,YAAY,CAACL,SAAS,CAAC;IAEvB,MAAMQ,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;IAEtB,IAAI,CAACL,KAAK,EAAEA,KAAK,GAAGK,GAAG;IACvB,MAAME,OAAO,GAAGF,GAAG,GAAGG,IAAI,CAACC,GAAG,CAACT,KAAK,EAAEF,QAAQ,CAAC;IAE/C,SAASY,MAAMA,CAAA,EAAI;MACjBZ,QAAQ,GAAGQ,IAAI,CAACD,GAAG,CAAC,CAAC;MACrBR,SAAS,GAAGc,UAAU,CAACV,KAAK,EAAER,KAAK,CAAC;MACpCD,EAAE,CAAC,GAAGY,IAAI,CAAC;IACb;IAEA,IAAI,CAACL,UAAU,EAAE;MACfA,UAAU,GAAG,IAAI;MACjB,IAAIL,OAAO,CAACC,OAAO,EAAE;QACnBe,MAAM,CAAC,CAAC;MACV;IACF,CAAC,MAAM,IAAIH,OAAO,IAAId,KAAK,EAAE;MAC3BiB,MAAM,CAAC,CAAC;IACV,CAAC,MAAM,IAAIhB,OAAO,CAACE,QAAQ,EAAE;MAC3BC,SAAS,GAAGc,UAAU,CAACD,MAAM,EAAEjB,KAAK,GAAGc,OAAO,CAAC;IACjD;EACF,CAAC;EAEDJ,IAAI,CAACF,KAAK,GAAGA,KAAK;EAClBE,IAAI,CAACS,SAAS,GAAGpB,EAAE;EACnB,OAAOW,IAAI;AACb","ignoreList":[]}