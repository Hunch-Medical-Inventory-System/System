{"version":3,"file":"resizeObserver.js","names":["onBeforeUnmount","readonly","ref","watch","templateRef","IN_BROWSER","useResizeObserver","callback","box","resizeRef","contentRect","observer","ResizeObserver","entries","length","value","target","getBoundingClientRect","disconnect","el","newValue","oldValue","unobserve","undefined","observe","flush"],"sources":["../../src/composables/resizeObserver.ts"],"sourcesContent":["// Utilities\nimport { onBeforeUnmount, readonly, ref, watch } from 'vue'\nimport { templateRef } from '@/util'\nimport { IN_BROWSER } from '@/util/globals'\n\n// Types\nimport type { DeepReadonly, Ref } from 'vue'\nimport type { TemplateRef } from '@/util'\n\ninterface ResizeState {\n  resizeRef: TemplateRef\n  contentRect: DeepReadonly<Ref<DOMRectReadOnly | undefined>>\n}\n\nexport function useResizeObserver (callback?: ResizeObserverCallback, box: 'content' | 'border' = 'content'): ResizeState {\n  const resizeRef = templateRef()\n  const contentRect = ref<DOMRectReadOnly>()\n\n  if (IN_BROWSER) {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      callback?.(entries, observer)\n\n      if (!entries.length) return\n\n      if (box === 'content') {\n        contentRect.value = entries[0].contentRect\n      } else {\n        contentRect.value = entries[0].target.getBoundingClientRect()\n      }\n    })\n\n    onBeforeUnmount(() => {\n      observer.disconnect()\n    })\n\n    watch(() => resizeRef.el, (newValue, oldValue) => {\n      if (oldValue) {\n        observer.unobserve(oldValue)\n        contentRect.value = undefined\n      }\n\n      if (newValue) observer.observe(newValue)\n    }, {\n      flush: 'post',\n    })\n  }\n\n  return {\n    resizeRef,\n    contentRect: readonly(contentRect),\n  }\n}\n"],"mappings":"AAAA;AACA,SAASA,eAAe,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,KAAK,QAAQ,KAAK;AAAA,SAClDC,WAAW;AAAA,SACXC,UAAU,8BAEnB;AASA,OAAO,SAASC,iBAAiBA,CAAEC,QAAiC,EAAEC,GAAyB,GAAG,SAAS,EAAe;EACxH,MAAMC,SAAS,GAAGL,WAAW,CAAC,CAAC;EAC/B,MAAMM,WAAW,GAAGR,GAAG,CAAkB,CAAC;EAE1C,IAAIG,UAAU,EAAE;IACd,MAAMM,QAAQ,GAAG,IAAIC,cAAc,CAAEC,OAA8B,IAAK;MACtEN,QAAQ,GAAGM,OAAO,EAAEF,QAAQ,CAAC;MAE7B,IAAI,CAACE,OAAO,CAACC,MAAM,EAAE;MAErB,IAAIN,GAAG,KAAK,SAAS,EAAE;QACrBE,WAAW,CAACK,KAAK,GAAGF,OAAO,CAAC,CAAC,CAAC,CAACH,WAAW;MAC5C,CAAC,MAAM;QACLA,WAAW,CAACK,KAAK,GAAGF,OAAO,CAAC,CAAC,CAAC,CAACG,MAAM,CAACC,qBAAqB,CAAC,CAAC;MAC/D;IACF,CAAC,CAAC;IAEFjB,eAAe,CAAC,MAAM;MACpBW,QAAQ,CAACO,UAAU,CAAC,CAAC;IACvB,CAAC,CAAC;IAEFf,KAAK,CAAC,MAAMM,SAAS,CAACU,EAAE,EAAE,CAACC,QAAQ,EAAEC,QAAQ,KAAK;MAChD,IAAIA,QAAQ,EAAE;QACZV,QAAQ,CAACW,SAAS,CAACD,QAAQ,CAAC;QAC5BX,WAAW,CAACK,KAAK,GAAGQ,SAAS;MAC/B;MAEA,IAAIH,QAAQ,EAAET,QAAQ,CAACa,OAAO,CAACJ,QAAQ,CAAC;IAC1C,CAAC,EAAE;MACDK,KAAK,EAAE;IACT,CAAC,CAAC;EACJ;EAEA,OAAO;IACLhB,SAAS;IACTC,WAAW,EAAET,QAAQ,CAACS,WAAW;EACnC,CAAC;AACH","ignoreList":[]}