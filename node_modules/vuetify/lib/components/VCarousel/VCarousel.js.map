{"version":3,"file":"VCarousel.js","names":["VBtn","VDefaultsProvider","VProgressLinear","makeVWindowProps","VWindow","IconValue","useLocale","useProxiedModel","nextTick","onMounted","ref","watch","convertToUnit","genericComponent","propsFactory","useRender","makeVCarouselProps","color","String","cycle","Boolean","delimiterIcon","type","default","height","Number","hideDelimiters","hideDelimiterBackground","interval","validator","value","progress","verticalDelimiters","continuous","mandatory","showArrows","VCarousel","name","props","emits","setup","slots","model","t","windowRef","slideTimeout","restartTimeout","val","window","clearTimeout","startTimeout","setTimeout","group","next","requestAnimationFrame","onDelimiterKeyDown","e","direction","key","preventDefault","prev","$el","querySelector","focus","windowProps","filterProps","_createVNode","_mergeProps","$event","class","style","additional","_createElementVNode","_Fragment","left","right","items","length","icon","size","variant","map","item","index","id","isSelected","onClick","select","onKeydown","undefined","getItemIndex"],"sources":["../../../src/components/VCarousel/VCarousel.tsx"],"sourcesContent":["// Styles\nimport './VCarousel.sass'\n\n// Components\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VProgressLinear } from '@/components/VProgressLinear'\nimport { makeVWindowProps, VWindow } from '@/components/VWindow/VWindow'\n\n// Composables\nimport { IconValue } from '@/composables/icons'\nimport { useLocale } from '@/composables/locale'\nimport { useProxiedModel } from '@/composables/proxiedModel'\n\n// Utilities\nimport { nextTick, onMounted, ref, watch } from 'vue'\nimport { convertToUnit, genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { VWindowSlots } from '@/components/VWindow/VWindow'\nimport type { GroupProvide } from '@/composables/group'\nimport type { GenericProps } from '@/util'\n\nexport const makeVCarouselProps = propsFactory({\n  color: String,\n  cycle: Boolean,\n  delimiterIcon: {\n    type: IconValue,\n    default: '$delimiter',\n  },\n  height: {\n    type: [Number, String],\n    default: 500,\n  },\n  hideDelimiters: Boolean,\n  hideDelimiterBackground: Boolean,\n  interval: {\n    type: [Number, String],\n    default: 6000,\n    validator: (value: string | number) => Number(value) > 0,\n  },\n  progress: [Boolean, String],\n  verticalDelimiters: [Boolean, String] as PropType<boolean | 'left' | 'right'>,\n\n  ...makeVWindowProps({\n    continuous: true,\n    mandatory: 'force' as const,\n    showArrows: true,\n  }),\n}, 'VCarousel')\n\ntype VCarouselSlots = Omit<VWindowSlots, 'additional'> & {\n  item: {\n    props: Record<string, any>\n    item: {\n      id: string\n      value: unknown\n      disabled: boolean | undefined\n    }\n  }\n}\n\nexport const VCarousel = genericComponent<new <T>(\n  props: {\n    modelValue?: T\n    'onUpdate:modelValue'?: (value: T) => void\n  },\n  slots: VCarouselSlots,\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VCarousel',\n\n  props: makeVCarouselProps(),\n\n  emits: {\n    'update:modelValue': (value: any) => true,\n  },\n\n  setup (props, { slots }) {\n    const model = useProxiedModel(props, 'modelValue')\n    const { t } = useLocale()\n    const windowRef = ref<VWindow>()\n\n    let slideTimeout = -1\n    watch(model, restartTimeout)\n    watch(() => props.interval, restartTimeout)\n    watch(() => props.cycle, val => {\n      if (val) restartTimeout()\n      else window.clearTimeout(slideTimeout)\n    })\n\n    onMounted(startTimeout)\n\n    function startTimeout () {\n      if (!props.cycle || !windowRef.value) return\n\n      slideTimeout = window.setTimeout(\n        windowRef.value.group.next,\n        Number(props.interval) > 0 ? Number(props.interval) : 6000\n      )\n    }\n\n    function restartTimeout () {\n      window.clearTimeout(slideTimeout)\n      window.requestAnimationFrame(startTimeout)\n    }\n\n    function onDelimiterKeyDown (e: KeyboardEvent, group: GroupProvide) {\n      if (\n        (props.direction === 'horizontal' && e.key === 'ArrowLeft') ||\n        (props.direction === 'vertical' && e.key === 'ArrowUp')\n      ) {\n        e.preventDefault()\n        group.prev()\n        nextTick(() => windowRef.value?.$el.querySelector('.v-btn--active')?.focus())\n      }\n\n      if (\n        (props.direction === 'horizontal' && e.key === 'ArrowRight') ||\n        (props.direction === 'vertical' && e.key === 'ArrowDown')\n      ) {\n        e.preventDefault()\n        group.next()\n        nextTick(() => windowRef.value?.$el.querySelector('.v-btn--active')?.focus())\n      }\n    }\n\n    useRender(() => {\n      const windowProps = VWindow.filterProps(props)\n\n      return (\n        <VWindow\n          ref={ windowRef }\n          { ...windowProps }\n          v-model={ model.value }\n          class={[\n            'v-carousel',\n            {\n              'v-carousel--hide-delimiter-background': props.hideDelimiterBackground,\n              'v-carousel--vertical-delimiters': props.verticalDelimiters,\n            },\n            props.class,\n          ]}\n          style={[\n            { height: convertToUnit(props.height) },\n            props.style,\n          ]}\n        >\n          {{\n            default: slots.default,\n            additional: ({ group }: { group: GroupProvide }) => (\n              <>\n                { !props.hideDelimiters && (\n                  <div\n                    class=\"v-carousel__controls\"\n                    style={{\n                      left: props.verticalDelimiters === 'left' && props.verticalDelimiters ? 0 : 'auto',\n                      right: props.verticalDelimiters === 'right' ? 0 : 'auto',\n                    }}\n                  >\n                    { group.items.value.length > 0 && (\n                      <VDefaultsProvider\n                        defaults={{\n                          VBtn: {\n                            color: props.color,\n                            icon: props.delimiterIcon,\n                            size: 'x-small',\n                            variant: 'text',\n                          },\n                        }}\n                        scoped\n                      >\n                        { group.items.value.map((item, index) => {\n                          const props = {\n                            id: `carousel-item-${item.id}`,\n                            'aria-label': t('$vuetify.carousel.ariaLabel.delimiter', index + 1, group.items.value.length),\n                            class: [\n                              'v-carousel__controls__item',\n                              group.isSelected(item.id) && 'v-btn--active',\n                            ],\n                            onClick: () => group.select(item.id, true),\n                            onKeydown: (e: KeyboardEvent) => onDelimiterKeyDown(e, group),\n                          }\n\n                          return slots.item\n                            ? slots.item({ props, item })\n                            : (<VBtn { ...item } { ...props } />)\n                        })}\n                      </VDefaultsProvider>\n                    )}\n                  </div>\n                )}\n\n                { props.progress && (\n                  <VProgressLinear\n                    absolute\n                    class=\"v-carousel__progress\"\n                    color={ typeof props.progress === 'string' ? props.progress : undefined }\n                    modelValue={ (group.getItemIndex(model.value) + 1) / group.items.value.length * 100 }\n                  />\n                )}\n              </>\n            ),\n            prev: slots.prev,\n            next: slots.next,\n          }}\n        </VWindow>\n      )\n    })\n\n    return {}\n  },\n})\n\nexport type VCarousel = InstanceType<typeof VCarousel>\n"],"mappings":"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","ignoreList":[]}