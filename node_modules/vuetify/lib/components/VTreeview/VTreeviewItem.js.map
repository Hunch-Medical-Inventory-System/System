{"version":3,"file":"VTreeviewItem.js","names":["VAvatar","VBtn","VDefaultsProvider","VIcon","VListItemAction","makeVListItemProps","VListItem","VProgressCircular","forwardRefs","IconValue","computed","inject","ref","toRaw","VTreeviewSymbol","genericComponent","propsFactory","useRender","makeVTreeviewItemProps","loading","Boolean","hideActions","hasCustomPrepend","indentLines","Array","toggleIcon","slim","VTreeviewItem","name","props","emits","toggleExpand","value","setup","slots","emit","visibleIds","vListItemRef","isActivatableGroupActivator","root","activatable","isGroupActivator","vListItemRefIsClickable","link","isClickable","list","disabled","isFiltered","has","id","activateGroupActivator","e","activate","isActivated","onClickAction","preventDefault","stopPropagation","listItemProps","filterProps","hasPrepend","prepend","prependIcon","prependAvatar","_createVNode","_mergeProps","undefined","class","slotProps","_createElementVNode","_Fragment","length","map","type","_normalizeClass","default","toggle","loader","density","icon","variant","indeterminate","size","width","onClick","image","appendAvatar","appendIcon","start"],"sources":["../../../src/components/VTreeview/VTreeviewItem.tsx"],"sourcesContent":["// Styles\nimport './VTreeviewItem.sass'\n\n// Components\nimport { VAvatar } from '@/components/VAvatar'\nimport { VBtn } from '@/components/VBtn'\nimport { VDefaultsProvider } from '@/components/VDefaultsProvider'\nimport { VIcon } from '@/components/VIcon'\nimport { VListItemAction } from '@/components/VList'\nimport { makeVListItemProps, VListItem } from '@/components/VList/VListItem'\nimport { VProgressCircular } from '@/components/VProgressCircular'\n\n// Composables\nimport { forwardRefs } from '@/composables/forwardRefs'\nimport { IconValue } from '@/composables/icons'\n\n// Utilities\nimport { computed, inject, ref, toRaw } from 'vue'\nimport { VTreeviewSymbol } from './shared'\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type { ToggleListItemSlot } from './shared'\nimport type { VListItemSlots } from '@/components/VList/VListItem'\nimport type { IndentLineType } from '@/util'\n\nexport const makeVTreeviewItemProps = propsFactory({\n  loading: Boolean,\n  hideActions: Boolean,\n  hasCustomPrepend: Boolean,\n  indentLines: Array as PropType<IndentLineType[]>,\n  toggleIcon: IconValue,\n\n  ...makeVListItemProps({ slim: true }),\n}, 'VTreeviewItem')\n\nexport type VTreeviewItemSlots = VListItemSlots & {\n  toggle: ToggleListItemSlot & { loading: boolean }\n}\n\nexport const VTreeviewItem = genericComponent<VTreeviewItemSlots>()({\n  name: 'VTreeviewItem',\n\n  props: makeVTreeviewItemProps(),\n\n  emits: {\n    toggleExpand: (value: PointerEvent) => true,\n  },\n\n  setup (props, { slots, emit }) {\n    const visibleIds = inject(VTreeviewSymbol, { visibleIds: ref() }).visibleIds\n\n    const vListItemRef = ref<VListItem>()\n\n    const isActivatableGroupActivator = computed(() =>\n      (vListItemRef.value?.root.activatable.value) &&\n      vListItemRef.value?.isGroupActivator\n    )\n    const vListItemRefIsClickable = computed(() => (\n      vListItemRef.value?.link.isClickable.value ||\n      (props.value != null && !!vListItemRef.value?.list)\n    ))\n    const isClickable = computed(() =>\n      !props.disabled &&\n      props.link !== false &&\n      (props.link || vListItemRefIsClickable.value || isActivatableGroupActivator.value)\n    )\n    const isFiltered = computed(() => visibleIds.value && !visibleIds.value.has(toRaw(vListItemRef.value?.id)))\n\n    function activateGroupActivator (e: MouseEvent | KeyboardEvent) {\n      if (isClickable.value && isActivatableGroupActivator.value) {\n        vListItemRef.value?.activate(!vListItemRef.value?.isActivated, e)\n      }\n    }\n\n    function onClickAction (e: PointerEvent) {\n      e.preventDefault()\n      e.stopPropagation()\n      emit('toggleExpand', e)\n    }\n\n    useRender(() => {\n      const listItemProps = VListItem.filterProps(props)\n      const hasPrepend = slots.prepend ||\n        props.toggleIcon ||\n        props.indentLines ||\n        props.prependIcon ||\n        props.prependAvatar\n\n      return (\n        <VListItem\n          ref={ vListItemRef }\n          { ...listItemProps }\n          active={ vListItemRef.value?.isActivated || undefined }\n          class={[\n            'v-treeview-item',\n            {\n              'v-treeview-item--activatable-group-activator': isActivatableGroupActivator.value,\n              'v-treeview-item--filtered': isFiltered.value,\n            },\n            props.class,\n          ]}\n          ripple={ false }\n          onClick={ activateGroupActivator }\n        >\n          {{\n            ...slots,\n            prepend: hasPrepend ? slotProps => {\n              return (\n                <>\n                  { props.indentLines && props.indentLines.length > 0 ? (\n                    <div\n                      key=\"indent-lines\"\n                      class=\"v-treeview-indent-lines\"\n                      style={{ '--v-indent-parts': props.indentLines.length }}\n                    >\n                      { props.indentLines.map(type => (\n                        <div class={ `v-treeview-indent-line v-treeview-indent-line--${type}` } />\n                      ))}\n                    </div>\n                  ) : '' }\n                  { !props.hideActions && (\n                    <VListItemAction start>\n                      { props.toggleIcon ? (\n                        <>\n                          { !slots.toggle ? (\n                            <VBtn\n                              key=\"prepend-toggle\"\n                              density=\"compact\"\n                              icon={ props.toggleIcon }\n                              loading={ props.loading }\n                              variant=\"text\"\n                              onClick={ onClickAction }\n                            >\n                              {{\n                                loader: () => (\n                                  <VProgressCircular\n                                    indeterminate=\"disable-shrink\"\n                                    size=\"20\"\n                                    width=\"2\"\n                                  />\n                                ),\n                              }}\n                            </VBtn>\n                          ) : (\n                            <VDefaultsProvider\n                              key=\"prepend-defaults\"\n                              defaults={{\n                                VBtn: {\n                                  density: 'compact',\n                                  icon: props.toggleIcon,\n                                  variant: 'text',\n                                  loading: props.loading,\n                                },\n                                VProgressCircular: {\n                                  indeterminate: 'disable-shrink',\n                                  size: 20,\n                                  width: 2,\n                                },\n                              }}\n                            >\n                              { slots.toggle({\n                                ...slotProps,\n                                loading: props.loading,\n                                props: {\n                                  onClick: onClickAction,\n                                },\n                              })}\n                            </VDefaultsProvider>\n                          )}\n                        </>\n                      ) : (\n                        <div class=\"v-treeview-item__level\" />\n                      )}\n                    </VListItemAction>\n                  )}\n\n                  { !props.hasCustomPrepend ? (\n                    <>\n                      { slots.prepend?.(slotProps) }\n                      { props.prependAvatar && (\n                        <VAvatar\n                          key=\"prepend-avatar\"\n                          density={ props.density }\n                          image={ props.prependAvatar }\n                        />\n                      )}\n\n                      { props.prependIcon && (\n                        <VIcon\n                          key=\"prepend-icon\"\n                          density={ props.density }\n                          icon={ props.prependIcon }\n                        />\n                      )}\n                    </>\n                  ) : (\n                    <VDefaultsProvider\n                      key=\"prepend-defaults\"\n                      defaults={{\n                        VAvatar: {\n                          density: props.density,\n                          image: props.appendAvatar,\n                        },\n                        VIcon: {\n                          density: props.density,\n                          icon: props.appendIcon,\n                        },\n                        VListItemAction: {\n                          start: true,\n                        },\n                      }}\n                    >\n                      { slots.prepend?.(slotProps) }\n                    </VDefaultsProvider>\n                  )}\n                </>\n              )\n            } : undefined,\n          }}\n        </VListItem>\n      )\n    })\n\n    return forwardRefs({}, vListItemRef)\n  },\n})\n\nexport type VTreeviewItem = InstanceType<typeof VTreeviewItem>\n"],"mappings":"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","ignoreList":[]}